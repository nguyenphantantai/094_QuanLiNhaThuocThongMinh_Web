# HÆ°á»›ng dáº«n sá»­ dá»¥ng Flow ÄÄƒng kÃ½ vÃ  HoÃ n thiá»‡n ThÃ´ng tin

## ğŸ¯ Tá»•ng quan

Sau khi Ä‘Äƒng kÃ½ thÃ nh cÃ´ng, há»‡ thá»‘ng sáº½ tá»± Ä‘á»™ng hiá»ƒn thá»‹ form hoÃ n thiá»‡n thÃ´ng tin cÃ¡ nhÃ¢n Ä‘á»ƒ ngÆ°á»i dÃ¹ng Ä‘iá»n thÃªm cÃ¡c thÃ´ng tin cáº§n thiáº¿t.

## ğŸ“‹ Flow hoáº¡t Ä‘á»™ng

### BÆ°á»›c 1: ÄÄƒng kÃ½ tÃ i khoáº£n
1. Má»Ÿ website vÃ  click "ÄÄƒng kÃ½"
2. Äiá»n thÃ´ng tin:
   - **Sá»‘ Ä‘iá»‡n thoáº¡i** (báº¯t buá»™c)
   - **Máº­t kháº©u** (báº¯t buá»™c)
   - **Nháº­p láº¡i máº­t kháº©u** (báº¯t buá»™c)
   - **Email** (báº¯t buá»™c)
3. Click "Gá»­i OTP" Ä‘á»ƒ nháº­n mÃ£ xÃ¡c thá»±c
4. Nháº­p mÃ£ OTP 6 chá»¯ sá»‘
5. Click "ÄÄƒng KÃ½ Ngay"

### BÆ°á»›c 2: HoÃ n thiá»‡n thÃ´ng tin cÃ¡ nhÃ¢n
Sau khi Ä‘Äƒng kÃ½ thÃ nh cÃ´ng, form thÃ´ng tin cÃ¡ nhÃ¢n sáº½ tá»± Ä‘á»™ng hiá»ƒn thá»‹:

#### ThÃ´ng tin báº¯t buá»™c:
- **Há» vÃ  tÃªn** â­
- **Giá»›i tÃ­nh** â­ (Nam/Ná»¯/KhÃ¡c)

#### ThÃ´ng tin tÃ¹y chá»n:
- **áº¢nh Ä‘áº¡i diá»‡n** (upload file hÃ¬nh áº£nh, tá»‘i Ä‘a 5MB)
- **TÃªn Ä‘á»‡m**
- **NgÃ y sinh** (chá»n tá»« calendar)
- **Äá»‹a chá»‰**

### BÆ°á»›c 3: HoÃ n táº¥t
- Click "HoÃ n thiá»‡n thÃ´ng tin" Ä‘á»ƒ lÆ°u
- Hoáº·c click "Bá» qua vÃ  hoÃ n thiá»‡n sau" Ä‘á»ƒ bá» qua

## ğŸ¨ Giao diá»‡n Form

### Form ÄÄƒng kÃ½
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¥ NhaThuocAI    ğŸŒ Viá»‡t Nam - Tiáº¿ng viá»‡t  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ÄÄƒng kÃ½                            â”‚
â”‚                                     â”‚
â”‚  Sá»‘ Ä‘iá»‡n thoáº¡i *                    â”‚
â”‚  [________________]                 â”‚
â”‚                                     â”‚
â”‚  Máº­t kháº©u *                         â”‚
â”‚  [________________] ğŸ‘ï¸              â”‚
â”‚                                     â”‚
â”‚  Nháº­p láº¡i máº­t kháº©u *                â”‚
â”‚  [________________] ğŸ‘ï¸              â”‚
â”‚                                     â”‚
â”‚  E-mail *                           â”‚
â”‚  [________________]                 â”‚
â”‚                                     â”‚
â”‚  MÃ£ xÃ¡c thá»±c *                      â”‚
â”‚  [________] [Gá»­i OTP]               â”‚
â”‚                                     â”‚
â”‚  [    ÄÄƒng KÃ½ Ngay    ]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Form HoÃ n thiá»‡n ThÃ´ng tin
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¥ NhaThuocAI    ğŸŒ Viá»‡t Nam - Tiáº¿ng viá»‡t  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  HoÃ n thiá»‡n thÃ´ng tin cÃ¡ nhÃ¢n       â”‚
â”‚                                     â”‚
â”‚  áº¢nh Ä‘áº¡i diá»‡n                       â”‚
â”‚  [ğŸ‘¤] [Chá»n áº£nh]                    â”‚
â”‚                                     â”‚
â”‚  Há» vÃ  tÃªn *                        â”‚
â”‚  [________________]                 â”‚
â”‚                                     â”‚
â”‚  TÃªn Ä‘á»‡m (tÃ¹y chá»n)                 â”‚
â”‚  [________________]                 â”‚
â”‚                                     â”‚
â”‚  ğŸ“… NgÃ y sinh                       â”‚
â”‚  [____-__-__]                       â”‚
â”‚                                     â”‚
â”‚  Giá»›i tÃ­nh *                        â”‚
â”‚  [Nam] [Ná»¯] [KhÃ¡c]                  â”‚
â”‚                                     â”‚
â”‚  ğŸ“ Äá»‹a chá»‰                         â”‚
â”‚  [________________]                 â”‚
â”‚                                     â”‚
â”‚  [  HoÃ n thiá»‡n thÃ´ng tin  ]         â”‚
â”‚                                     â”‚
â”‚  Bá» qua vÃ  hoÃ n thiá»‡n sau           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ CÃ¡ch test

### 1. Khá»Ÿi Ä‘á»™ng á»©ng dá»¥ng
```bash
# Terminal 1 - Backend
cd Backend_ReactSinglepage
npm run dev

# Terminal 2 - Frontend  
cd ReactSinglepage
npm run dev
```

### 2. Test thá»§ cÃ´ng
1. Má»Ÿ browser: `http://localhost:3000`
2. Click "ÄÄƒng nháº­p/ÄÄƒng kÃ½"
3. Click "ÄÄƒng kÃ½"
4. Äiá»n thÃ´ng tin vÃ  test flow

### 3. Test tá»± Ä‘á»™ng
```bash
cd Backend_ReactSinglepage
node test-register-flow.js
```

## ğŸ“Š Database Schema

### User Collection
```javascript
{
  _id: ObjectId,
  email: String,           // Email Ä‘Äƒng kÃ½
  phone: String,           // Sá»‘ Ä‘iá»‡n thoáº¡i
  password: String,        // Máº­t kháº©u Ä‘Ã£ hash
  firstName: String,       // TÃªn (tá»« form hoÃ n thiá»‡n)
  lastName: String,        // Há» (tá»« form hoÃ n thiá»‡n)
  dateOfBirth: Date,       // NgÃ y sinh (tÃ¹y chá»n)
  gender: String,          // Giá»›i tÃ­nh (male/female/other)
  address: String,         // Äá»‹a chá»‰ (tÃ¹y chá»n)
  avatar: String,          // ÄÆ°á»ng dáº«n áº£nh Ä‘áº¡i diá»‡n
  isActive: Boolean,       // Tráº¡ng thÃ¡i tÃ i khoáº£n
  isVerified: Boolean,     // ÄÃ£ xÃ¡c thá»±c OTP
  role: String,            // Vai trÃ² (customer/admin/pharmacist)
  createdAt: Date,         // NgÃ y táº¡o
  updatedAt: Date          // NgÃ y cáº­p nháº­t
}
```

## ğŸš¨ LÆ°u Ã½ quan trá»ng

1. **OTP**: MÃ£ OTP sáº½ Ä‘Æ°á»£c hiá»ƒn thá»‹ trong console cá»§a backend (chá»‰ trong mÃ´i trÆ°á»ng development)
2. **Avatar**: Hiá»‡n táº¡i chá»‰ lÆ°u filename, trong production cáº§n upload lÃªn cloud storage
3. **Validation**: Táº¥t cáº£ validation Ä‘Æ°á»£c thá»±c hiá»‡n á»Ÿ cáº£ frontend vÃ  backend
4. **Security**: JWT token Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ xÃ¡c thá»±c cÃ¡c request

## ğŸ¯ Káº¿t quáº£ mong Ä‘á»£i

Sau khi hoÃ n thÃ nh flow:
- âœ… User Ä‘Æ°á»£c táº¡o trong database vá»›i thÃ´ng tin Ä‘áº§y Ä‘á»§
- âœ… Token Ä‘Æ°á»£c lÆ°u trong localStorage
- âœ… Form Ä‘Äƒng kÃ½ Ä‘Ã³ng láº¡i
- âœ… Form hoÃ n thiá»‡n thÃ´ng tin hiá»ƒn thá»‹
- âœ… Sau khi hoÃ n thiá»‡n, user cÃ³ thá»ƒ sá»­ dá»¥ng Ä‘áº§y Ä‘á»§ tÃ­nh nÄƒng

## ğŸ› Troubleshooting

### Lá»—i thÆ°á»ng gáº·p:
1. **"OTP not found"**: Kiá»ƒm tra console backend Ä‘á»ƒ láº¥y OTP
2. **"User already exists"**: Sá»­ dá»¥ng sá»‘ Ä‘iá»‡n thoáº¡i khÃ¡c
3. **"Invalid OTP"**: Nháº­p Ä‘Ãºng mÃ£ OTP 6 chá»¯ sá»‘
4. **"Token expired"**: ÄÄƒng nháº­p láº¡i

### Debug:
- Kiá»ƒm tra console browser (F12)
- Kiá»ƒm tra console backend
- Kiá»ƒm tra Network tab Ä‘á»ƒ xem API calls
